ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
geom_text(aes(label = round(percentage, digits = 3)),
size = 2, col = "white") +
facet_grid(.~ policy_type[1,3])
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
geom_text(aes(label = round(percentage, digits = 3)),
size = 2, col = "white") +
facet_grid(.~ policy_type[1:3])
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
select(policy_type = c("Relaxing", "Restricting", "Others"))
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
select(policy_type = c("Relaxing", "Restricting", "Other"))
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type = c("Relaxing", "Restricting", "Other"))
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
select(policy_type == c("Relaxing", "Restricting", "Other"))
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type == c("Relaxing", "Restricting", "Other"))
?facet_grid
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type %in% c("Relaxing", "Restricting", "Other"))
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
geom_text(aes(label = round(percentage, digits = 3)),
size = 2, col = "white") +
facet_grid(.~ policy_type)
policy_summary <- df_policy_updated %>%
group_by(policy_year, policy_month, policy_category, policy_type) %>%
summarise(
count = n()
) %>%
mutate(
ymd = as.Date(paste(policy_year, policy_month, "01", sep = "-"),
format = "%Y-%m-%d")
)
total_count <- policy_summary %>%
group_by(ymd) %>%
summarise(
total_count = sum(count)
)
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type %in% c("Relaxing", "Restricting", "Other"))
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
geom_text(aes(label = round(percentage, digits = 3)),
size = 2, col = "white") +
facet_grid(.~ policy_type)
total_count <- policy_summary %>%
group_by(ymd, policy_type) %>%
summarise(
total_count = sum(count)
)
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type %in% c("Relaxing", "Restricting", "Other"))
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
geom_text(aes(label = round(percentage, digits = 3)),
size = 2, col = "white") +
facet_grid(.~ policy_type)
policy_summary_updated <- merge(policy_summary,
total_count,
by = "ymd") %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type %in% c("Relaxing", "Restricting", "Other"))
total_count <- policy_summary %>%
group_by(ymd) %>%
summarise(
total_count = sum(count)
)
View(total_count)
by = c("ymd", "policy_type") %>%
policy_summary_updated <- merge(policy_summary,
total_count,
by = c("ymd", "policy_type")) %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type %in% c("Relaxing", "Restricting", "Other"))
total_count <- policy_summary %>%
group_by(ymd, policy_type) %>%
summarise(
total_count = sum(count)
)
policy_summary_updated <- merge(policy_summary,
total_count,
by = c("ymd", "policy_type")) %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type %in% c("Relaxing", "Restricting", "Other"))
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
geom_text(aes(label = round(percentage, digits = 3)),
size = 2, col = "white") +
facet_grid(.~ policy_type)
total_count <- policy_summary %>%
group_by(ymd, policy_type) %>%
summarise(
total_count = sum(count)
)
View(policy_summary)
### Policy composition
```{r policy_data_processing, include=FALSE, echo=FALSE}
```{r policy_category, include=FALSE, echo = FALSE}
View(policy_summary_updated)
policy_summary_updated <- merge(policy_summary,
total_count,
by = c("ymd", "policy_type")) %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type %in% c("Relaxing", "Restricting", "Other"),
policy_year %in% c("2020", "2021"))
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
geom_text(aes(label = round(percentage, digits = 2)),
size = 2, col = "white") +
facet_grid(.~ policy_type) +
theme(
legend.position = "bottom"
)
policy_summary_updated <- merge(policy_summary,
total_count,
by = c("ymd", "policy_type")) %>%
mutate(
percentage = count / total_count
) %>%
filter(policy_type %in% c("Relaxing", "Restricting"),
policy_year %in% c("2020", "2021"))
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type) +
theme(
legend.position = "bottom"
)
policy_summary <- df_policy
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type) +
labs(x = element_blank(),
y = "Percentage") +
theme(
legend.position = "bottom"
)
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type) +
labs(x = element_blank(),
y = "Percentage") +
theme(
legend.position = "bottom",
axis.text.x = element_text(angle = 45,
hjust = 1)
)
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type, margin = 0.2) +
labs(x = element_blank(),
y = "Percentage") +
theme(
legend.position = "bottom",
axis.text.x = element_text(angle = 45,
hjust = 1)
)
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = percentage,
fill = policy_category)) +
geom_col() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type, margin = 20) +
labs(x = element_blank(),
y = "Percentage") +
theme(
legend.position = "bottom",
axis.text.x = element_text(angle = 45,
hjust = 1)
)
?facet_grid
policy_filered <- df_policy %>%
filter(policy_category %in% c("Authorization and enforcement",
"Face mask",
"Social distancing"))
policy_filered <- df_policy %>%
filter(
policy_type %in% c("Relaxing", "Restricting"),
policy_category %in% c("Authorization and enforcement",
"Face mask",
"Social distancing")
)
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = count,
fill = policy_category)) +
geom_col() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type) +
labs(x = element_blank(),
y = "Percentage") +
theme(
legend.position = "bottom",
axis.text.x = element_text(angle = 45,
hjust = 1)
)
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = count,
fill = policy_category)) +
geom_col() +
scale_y_log10() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type) +
labs(x = element_blank(),
y = "Percentage") +
theme(
legend.position = "bottom",
axis.text.x = element_text(angle = 45,
hjust = 1)
)
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = count,
fill = policy_category)) +
geom_col() +
scale_y_log10() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type) +
labs(x = element_blank(),
y = "Percentage") +
theme(
legend.position = "bottom",
axis.text.x = element_text(angle = 45,
hjust = 1)
)
ggplot(data = policy_summary_updated,
mapping = aes(x = ymd,
y = count,
fill = policy_category)) +
geom_col() +
# scale_y_log10() +
# geom_text(aes(label = round(percentage, digits = 2)),
#           size = 2, col = "white") +
facet_grid(.~ policy_type) +
labs(x = element_blank(),
y = "Percentage") +
theme(
legend.position = "bottom",
axis.text.x = element_text(angle = 45,
hjust = 1)
)
```{r policy_distribution_by_month, fig.cap="Figure. Policy distribution by category and month."}
View(policy_filered)
policy_summary <- policy_filered %>%
group_by(policy_type, policy_category) %>%
summarise(count = n())
ggplot(data = policy_summary,
mapping = aes(x = policy_type,
y = policy_category,
fill = count)) +
geom_tile()
policy_summary <- policy_filered %>%
group_by(policy_category, policy_subcategory) %>%
summarise(count = n())
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile()
policy_summary <- policy_data %>%
group_by(policy_category, policy_subcategory) %>%
summarise(count = n())
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile()
policy_summary <- df_policy %>%
group_by(policy_category, policy_subcategory) %>%
summarise(count = n())
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile()
policy_summary <- policy_filered %>%
group_by(policy_category, policy_subcategory) %>%
summarise(count = n())
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile()
ggplot(data = policy_summary,
mapping = aes(x = policy_targe,
y = policy_category,
fill = count)) +
geom_tile()
ggplot(data = policy_summary,
mapping = aes(x = policy_target,
y = policy_category,
fill = count)) +
geom_tile()
policy_summary <- policy_filered %>%
group_by(policy_category, policy_target) %>%
summarise(count = n())
ggplot(data = policy_summary,
mapping = aes(x = policy_target,
y = policy_category,
fill = count)) +
geom_tile()
ggplot(data = policy_summary,
mapping = aes(x = policy_target,
y = policy_category,
fill = count)) +
geom_tile() +
theme(
axis.text.x = element_text(angle = 90,
hjust = 1)
)
ggplot(data = policy_summary,
mapping = aes(x = policy_target,
y = policy_category,
fill = count)) +
geom_tile() +
theme(
axis.text.x = element_text(angle = 90,
hjust = 1,
size = 1)
)
policy_summary <- policy_filered %>%
group_by(policy_category, policy_target) %>%
summarise(count = n()) %>%
mutate(count = scale(count))
ggplot(data = policy_summary,
mapping = aes(x = policy_target,
y = policy_category,
fill = count)) +
geom_tile() +
theme(
axis.text.x = element_text(angle = 90,
hjust = 1,
size = 1)
)
policy_summary <- policy_filered %>%
group_by(policy_category, policy_subcategory) %>%
summarise(count = n()) %>%
mutate(count = scale(count))
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile()
policy_summary <- policy_filered %>%
group_by(policy_category, policy_subcategory) %>%
summarise(count = n()) %>%
mutate(count = standardize(count))
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile()
policy_summary <- policy_filered %>%
group_by(policy_category, policy_subcategory) %>%
summarise(count = n()) %>%
mutate(count = scale(count))
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile()
?scale
policy_summary <- policy_filered %>%
group_by(policy_type, policy_category) %>%
summarise(count = n()) %>%
mutate(count = scale(count))
ggplot(data = policy_summary,
mapping = aes(x = policy_type,
y = policy_category,
fill = count)) +
geom_tile()
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile() +
theme(
axis.text.x = element_text(angle = 90,
hjust = 1,
size = 3)
)
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile() +
theme(
axis.text.x = element_text(angle = 90,
hjust = 1,
size = 3)
)
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile() +
theme(
axis.text.x = element_text(angle = 90,
hjust = 1)
)
policy_summary <- policy_filered %>%
group_by(policy_category, policy_subcategory) %>%
summarise(count = n()) %>%
mutate(count = scale(count))
ggplot(data = policy_summary,
mapping = aes(x = policy_subcategory,
y = policy_category,
fill = count)) +
geom_tile() +
theme(
axis.text.x = element_text(angle = 90,
hjust = 1)
)
save.image("D:/OneDrive - Personal/OneDrive/Desktop/110 2023 Fall Semester/modeling-the-pandemic/.RData")
